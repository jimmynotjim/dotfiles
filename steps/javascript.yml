- defaults:
    link:
      relink: true
      create: true
    shell:
      quiet: true
      stdout: true
      stderr: true

# Personal only
- shell:
    - command: |
        # Remove Volta
        if command -v volta > /dev/null 2>&1; then
          echo "Removing Volta..."
          brew uninstall volta 2>/dev/null || true
          rm -rf ~/.volta
          echo "✓ Volta removed"
        fi
        # Remove fnm
        if command -v fnm > /dev/null 2>&1; then
          echo "Removing fnm..."
          brew uninstall fnm 2>/dev/null || true
          rm -rf ~/.fnm
          echo "✓ fnm removed"
        fi
        # Remove any global pnpm installations
        if [ -d ~/.local/share/pnpm ]; then
          echo "Removing global pnpm..."
          rm -rf ~/.local/share/pnpm
        fi
        echo "✓ Cleanup complete"
      description: Cleaning up old Node version managers
    - command: mise use --global node@24
      description: Installing Node
    - command: mise exec -- npm install -g corepack
      description: Installing Corepack globally
    - command: mise exec -- corepack enable
      description: Enabling Corepack for package manager support
    - command: |
        if ! npm whoami > /dev/null 2>&1; then
          echo ""
          echo "⚠️  NPM Authentication Required"
          echo "Run: npm login"
          echo "This will open your browser for OAuth authentication."
          echo ""
        else
          echo "✓ Already logged in to NPM as $(npm whoami)"
        fi
      description: Checking NPM authentication
